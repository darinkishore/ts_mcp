// prisma/schema.prisma
datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Result {
  id              String      @id
  title           String?
  author          String?
  url             String?
  denseSummary    String
  relevanceSummary String
  text            String
  relevanceScore  Float
  queryPurpose    String
  queryQuestion   String
  publishedDate   String?
  createdAt       DateTime    @default(now())
  updatedAt       DateTime    @updatedAt
  queries         QueryResult[]
}

model ExaQuery {
  id          Int          @id @default(autoincrement())
  queryText   String
  category    String?
  livecrawl   Boolean      @default(false)
  createdAt   DateTime     @default(now())
  results     QueryResult[]
}

model QueryResult {
  queryId     Int
  resultId    String
  query       ExaQuery     @relation(fields: [queryId], references: [id])
  result      Result       @relation(fields: [resultId], references: [id])
  @@id([queryId, resultId])
}
